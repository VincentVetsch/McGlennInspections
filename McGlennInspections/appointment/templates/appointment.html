{% extends "base.html" %}
{% block content %}
<h1>{{ site }} - Appointments</h1>
  <hr />
  <style>
    table {
      margin:10px;
      border: 1px solid #000000;
      -webkit-border-radius: 5px;
      -moz-border-radius: 5px;
      border-radius: 5px;
      -webkit-box-shadow: 0px 0px 4px #000000;
      -moz-box-shadow: 0px 0px 4px #000000;
      box-shadow: 0px 0px 4px #000000;
      font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    }
    tr.heading {
      padding: 5px;
      font-size:10px;
      text-shadow: 0px 0px 10px #A6AFFF;
      background-image: -moz-linear-gradient(top, #191970 13%, #000000 82%);
      background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0.13, #191970), color-stop(0.82, #000000));
      color: #FFFFE0;
    }
    td {
      font-size:10px;
      border:1px solid #555;
      padding:3px 7px 2px 7px;
    }
    td.image {vertical-align: middle; text-align:center; }
    tr.footer, td.footer {
      border: 0px;
      font-family: Arial, Helvetica, sans-serif;
      font-size:10px;
      text-shadow: 0px 0px 3px #ffffe0;
      background-color:#000;
      color: #fff;
      text-align: center;
    }
    tr.content:nth-child(odd) { background-color:#ddd; }
    tr.content:nth-child(even) { background-color:#fff; }
  </style>
  <table border="0" cellpadding="0" cellspacing="0">
    <tr class="heading">
      <th>Customer</th>
      <th>Phone</th>
      <th>Address</th>
      <th>Date and Time of Request</th>
      <th>Date of Request</th>
      <th>Accepted</th>
      <th>Aggrement Meeting</th>
      <th>Inspection Completed</th>
      <th>Report Completed</th>
      <th>Edit</th>
    </tr>
  {% for a in appointment %}
    <tr class="content">
      <td><a href="Mailto:{{ a.email }}">{{ a.full_name }}</a></td>
      <td>{{ a.phone }}</td>
      <!-- DONE - Add link to inspection_address detial view.-->
      <td><a href="{{ a.slug }}">{{ a.inspection_address }}</a></td>
      <td>{{ a.date_requested }} at {{ a.time_requested }}</td>
      <td>{{ a.timestamp }}</td>
      <!-- DONE - Try to  make these into submit buttons to change status -->
      <td class="image" width="55px">
        <form method="post">
          {% csrf_token %}
          <input type="hidden" name="Accepted" value="{{a.pk}}" />
          <button type="submit" />
          <img src="/media/images/{{a.accepted}}.png" height="18" width="18" />
        </form>
      </td>
      <td class="image" width="55px">
        <form method="post">
          {% csrf_token %}
          <input type="hidden" name="Pre_aggrement_meeting" value="{{a.pk}}" />
          <button type="submit" />
            <img src="/media/images/{{a.pre_aggrement_meeting}}.png" height="18" width="18"/>
        </form>
      </td>
      <td class="image" width="55px">
        <form method="post">
          {% csrf_token %}
          <input type="hidden" name="Inspection_completed" value="{{a.pk}}" />
          <button type="submit" />
          <img src="/media/images/{{a.inspection_completed}}.png" height="18" width="18"/>
        </form>
      </td>
      <td class="image" width="55px">
        <form method="post">
          {% csrf_token %}
          <input type="hidden" name="Report_completed" value="{{a.pk}}" />
          <button type="submit" />
          <img src="/media/images/{{a.report_completed}}.png" height="18" width="18"/>
        </form>
      </td>
      <!-- TODO - add Bubble help -->
      <td class="image" width="130px">
          <button type="button" />
          <a href="add_inspector/"><img src="/media/images/Man.png"  height="18" width="18"/></a>
          <button type="button" />
          <a href="change_status/"><img src="/media/images/Edit.png"  height="18" width="18" /></a>
          <form id="Delete" method="post">
            {% csrf_token %}
            <input type="hidden" name="Delete" value="{{a.pk}}" />
            <button type="submit" />
            <img src="/media/images/Delete.png" height="18" width="18" />
          </form>
      </td>
    </tr>
  {% endfor %}
    <!-- TODO - Add pagination -->
    <tr class="footer"><td colspan="10" class="footer">Add Pagination</td></tr>
  </table>
{% endblock %}
