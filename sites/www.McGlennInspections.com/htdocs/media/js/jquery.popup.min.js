/*-------------------------------

	POPUP.JS

	Simple Popup plugin for jQuery

	@author Todd Francis
	@version 2.0.1

-------------------------------*/

;(function(c,k){c.fn.popup=function(i){var l=this.selector,j=new c.Popup(i);c(document).on("click",l,function(a){a.preventDefault();j.open(this.getAttribute("href"),void 0,this)});return this.each(function(){c(this).data("popup",j)})};c.Popup=function(i){function l(d){m&&m.fadeOut("fast",function(){c(this).remove()});var b=!0;void 0===e&&(b=!1,e=c('<div class="'+a.o.containerClass+'">'),h=c(a.o.markup).appendTo(e),c(a.o.closeContent).one("click",function(){a.close()}).appendTo(e),c(k).resize(a.center),
e.appendTo(c("body")).css("opacity",0));var g=c("."+a.o.contentClass,e);a.width?g.css("width",a.width,10):g.css("width","");a.height?g.css("height",a.height,10):g.css("height","");h.hasClass(a.o.contentClass)?h.html(d):h.find("."+a.o.contentClass).html(d);b?a.o.replaced.call(a,e,f):a.o.show.call(a,e,f)}function j(a,b){var c=RegExp("[?&]"+a+"=([^&]*)").exec(b);return c&&decodeURIComponent(c[1].replace(/\+/g," "))}var a=this,n=["png","jpg","gif"],f,e,m,h;a.ele=void 0;a.o=c.extend(!0,{},{backClass:"popup_back",
backOpacity:0.7,containerClass:"popup_cont",closeContent:'<div class="popup_close">&times;</div>',markup:'<div class="popup"><div class="popup_content"/></div>',contentClass:"popup_content",preloaderContent:'<p class="preloader">Loading</p>',activeClass:"popup_active",hideFlash:!1,speed:200,modal:!1,content:null,type:"auto",width:null,height:null,typeParam:"pt",widthParam:"pw",heightParam:"ph",beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},error:function(){},
show:function(a){var b=this;b.center();a.animate({opacity:1},b.o.speed,function(){b.o.afterOpen.call(b)})},replaced:function(){this.center().o.afterOpen.call(this)},hide:function(a){a!==void 0&&a.animate({opacity:0},this.o.speed)},types:{inline:function(a,b){b.call(this,c(a).html())},image:function(d,b){var g=this;c("<img />").one("load",function(){var a=this;setTimeout(function(){b.call(g,a)},0)}).one("error",function(){a.o.error.call(a,d,"image")}).attr("src",d).each(function(){this.complete&&c(this).trigger("load")})},
external:function(d,b){var g=c("<iframe />").attr({src:d,frameborder:0,width:a.width,height:a.height});b.call(this,g)},html:function(a,b){b.call(this,a)},jQuery:function(a,b){b.call(this,a.html())},"function":function(c,b){b.call(this,c.call(a))},ajax:function(d,b){c.ajax({url:d,success:function(a){b.call(this,a)},error:function(){a.o.error.call(a,d,"ajax")}})}}},i);a.open=function(d,b,e){d=void 0===d||"#"===d?a.o.content:d;if(null===d)return a.o.error.call(a,d,b),!1;void 0!==e&&(a.ele&&a.o.activeClass&&
c(a.ele).removeClass(a.o.activeClass),a.ele=e,a.ele&&a.o.activeClass&&c(a.ele).addClass(a.o.activeClass));if(void 0===f){f=c('<div class="'+a.o.backClass+'"/>').appendTo(c("body")).css("opacity",0).animate({opacity:a.o.backOpacity},a.o.speed);if(!a.o.modal)f.one("click",function(){a.close()});a.o.hideFlash&&c("object, embed").css("visibility","hidden");a.o.preloaderContent&&(m=c(a.o.preloaderContent).appendTo(c("body")))}var h;c.each([b,a.o.type],function(a,b){if(b){h=b;return false}});b=h;b="auto"===
b?"function"===typeof d?"function":d instanceof c?"jQuery":"#"===d.substr(0,1)||"."===d.substr(0,1)?"inline":-1!==c.inArray(d.substr(d.length-3),n)?"image":"http"===d.substr(0,4)?"external":"ajax":b;a.width=a.o.width?a.o.width:null;a.height=a.o.height?a.o.height:null;if(-1===c.inArray(b,["inline","jQuery","function"])){var e=j(a.o.typeParam,d),i=j(a.o.widthParam,d),k=j(a.o.heightParam,d),b=null!==e?e:b;a.width=null!==i?i:a.width;a.height=null!==k?k:a.height}a.o.beforeOpen.call(a,b);a.o.types[b]?a.o.types[b].call(a,
d,l):a.o.types.ajax.call(a,d,l)};a.close=function(){a.o.beforeClose.call(a);void 0!==f&&f.animate({opacity:0},a.o.speed,function(){a.cleanUp()});a.o.hide.call(a,e,f);return a};a.cleanUp=function(){f.add(e).remove();e=f=void 0;c(k).unbind("resize",a.center);a.o.hideFlash&&c("object, embed").css("visibility","visible");a.ele&&a.o.activeClass&&c(a.ele).removeClass(a.o.activeClass);a.o.afterClose.call(a);return a};a.center=function(){e.css(a.getCenter());f.css({height:document.documentElement.clientHeight});
return a};a.getCenter=function(){var a=e.children().outerWidth(!0),b=e.children().outerHeight(!0);return{top:0.5*document.documentElement.clientHeight-0.5*b,left:0.5*document.documentElement.clientWidth-0.5*a}}}})(jQuery,window);